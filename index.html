<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./style.css">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>键盘导航</title>
</head>
<body>
  <main>
    <div class="wrapper" id="main"></div>
  </main>
</body>
<script>
  var keys = {
    0:['q','w','e','r','t','y','u','i','o','p'],
    1:['a','s','d','f','g','h','j','k','l'],
    2:['z','x','c','v','b','n','m'],
    'length':3
  }
  var hash = {
    'q':'qq.com',
    'z':'zhihu.com'
  }
  hashInLocalStorage = JSON.parse(localStorage.getItem('zzz') || 'null') //从浏览器读取hash覆盖之前的hash
  if(hashInLocalStorage){
    hash = hashInLocalStorage
  }
  var index = 0
  while(index<keys['length']){
    div1 = document.createElement('div')
    main.appendChild(div1)
    row = keys[index]
    var index2 = 0
    console.log(row)
    while(index2<row['length']){
      kbd1 = document.createElement('kbd')
      kbd1.textContent = row[index2]
      button1 = document.createElement('button')
      button1.textContent = '编辑'
      button1.id = row[index2]
      button1.onclick = function(kbd){
        key = kbd.target.id
        x = prompt('请输入需要跳转的网址')
        hash[key] = x  //hash变更
        localStorage.setItem('zzz',JSON.stringify(hash)) //把变更的hash纯金浏览器
      }
      kbd1.appendChild(button1)
      div1.appendChild(kbd1)
      index2 += 1
    }
    index += 1
  }
  document.onkeypress = function(kbd){
    key = kbd['key']
    website = hash[key]
    console.log(website)
    //location.href = 'http://' + website
    window.open('http://' + website,'_blank')
  }
</script>
</html>